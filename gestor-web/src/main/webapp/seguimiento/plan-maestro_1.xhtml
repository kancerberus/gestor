<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"                
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"                
                xmlns:f="http://java.sun.com/jsf/core"
                template="/template.xhtml">
    <ui:define name="content">
        <h:form enctype="multipart/form-data" id="formPlanMaestro" >
             <p:growl id="messages" showDetail="true" />
            <h1>
                PLAN MAESTRO
            </h1>
            <div align="left">
                <p:graphicImage  value="#{planMaestro.establecimiento.logo}" cache="false" width="80"/>
                <p:graphicImage url="/resources/imagenes/establecimientos/establecimiento.png" width="40" 
                    rendered="#{empty planMaestro.establecimiento.logo}"/>                                                                        
                <p:outputLabel style="font-size: 25px; font-family: bolder"  value="#{planMaestro.establecimiento.nombre}"/>                                     
            </div>
                <p:progressBar style="margin-left: 80%; margin: 0% 1% 1% 80%;" value="#{uiPlanMaestro.avanceEvaluacion}" labelTemplate="Avance EvaluaciÃ³n {value}%" displayOnly="true" interval="10"/>
            
                
                <p:tree  value="#{uiPlanMaestro.raizPlanear}" var="varPlanear" dynamic="true" orientation="horizontal"  filterBy="#{varPlanear}"
                         style="background: #5c9ddb; width: 60%" selectionMode="single" selection="#{uiPlanMaestro.selectedNode}" 
                        >                                        
                    
                    <p:ajax event="select" update="@(.dlgpdf),formPlanMaestro" oncomplete="PF('dlg1').show();"  listener="#{uiPlanMaestro.onNodeSelect}" />
                    
                    <p:treeNode  expandedIcon="ui-icon-folder-open" collapsedIcon=" ui-icon-folder-collapsed"   >                        
                        <h:outputText value="#{varPlanear}"/>
                    </p:treeNode>
                </p:tree>
                
                <p:tree value="#{uiPlanMaestro.raizHacer}" var="varHacer" dynamic="true" orientation="horizontal"  filterBy="#{raizHacer}"
                        selectionMode="single" selection="#{uiPlanMaestro.selectedNode}"                         
                        >
                    
                    <p:ajax event="select" update="@(.dlgpdf),formPlanMaestro" oncomplete="PF('dlg1').show();"  listener="#{uiPlanMaestro.onNodeSelect}" />
                    
                    <p:treeNode  expandedIcon="ui-icon-folder-open" collapsedIcon=" ui-icon-folder-collapsed">
                        <h:outputText value="#{varHacer}"/>
                    </p:treeNode>
                </p:tree>
                
                <p:tree value="#{uiPlanMaestro.raizVerificar}" var="varVerificar" dynamic="true" orientation="horizontal"  filterBy="#{raizVerificar}"
                        selectionMode="single" selection="#{uiPlanMaestro.selectedNode}"                         
                        >
                    
                    <p:ajax event="select" update="@(.dlgpdf),formPlanMaestro" oncomplete="PF('dlg1').show();"  listener="#{uiPlanMaestro.onNodeSelect}" />
                    
                    <p:treeNode expandedIcon="ui-icon-folder-open" collapsedIcon=" ui-icon-folder-collapsed">
                        <h:outputText value="#{varVerificar}"/>
                    </p:treeNode>
                </p:tree>
                
                <p:tree value="#{uiPlanMaestro.raizActuar}" var="varActuar" dynamic="true" orientation="horizontal"  filterBy="#{raizActuar}"
                        selectionMode="single" selection="#{uiPlanMaestro.selectedNode}"                         
                        >
                    
                    <p:ajax event="select" update="@(.dlgpdf),formPlanMaestro" oncomplete="PF('dlg1').show();"  listener="#{uiPlanMaestro.onNodeSelect}" />
                    
                    <p:treeNode  expandedIcon="ui-icon-folder-open" collapsedIcon=" ui-icon-folder-collapsed">
                        <h:outputText value="#{varActuar}"/>
                    </p:treeNode>
                </p:tree>
            <p:separator/>


            <p:dialog id="dialog" widgetVar="dialog" header="#{dialogo.header}" showEffect="#{dialogo.effect}" hideEffect="#{dialogo.effect}" width="#{dialogo.width}"
                      onHide="limpiarModal()">
                <ui:include src="#{dialogo.src}"/>
            </p:dialog>
            <p:remoteCommand name="limpiarModal" action="#{uiSesion.limpiarDialogo()}"  update="dialog" />            
            
            
            <p:dialog styleClass="dlgpdf" header="PDF" widgetVar="dlg1" width="100%" height="100%" >
                <p:media value="/pdfPreviewServlet" player="pdf" width="1200px" height="600px" >                    
                </p:media>
            </p:dialog>            
        </h:form>        
    </ui:define>
</ui:composition>
